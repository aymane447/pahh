{% extends 'base.html.twig' %}

{% block title %}Accueil - TicketFlow{% endblock %}

{% block stylesheets %}
{% endblock %}

{% block body %}
<style>
    /* ===== HERO ===== */
    .hero {
        height: 85vh;
        position: relative;
        display: flex;
        align-items: center;
        padding: 0 8%;
        background: linear-gradient(135deg, rgba(2, 6, 23, 0.9) 30%, rgba(2, 6, 23, 0.3)),
                    url("https://images.unsplash.com/photo-1557804506-669a67965ba0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80");
        background-size: cover;
        background-position: center;
    }

    .hero-content {
        max-width: 700px;
        animation: fadeInUp 1s ease-out;
    }

    .hero h1 {
        font-size: 4rem;
        font-weight: 800;
        line-height: 1.1;
        margin-bottom: 25px;
    }

    .hero span {
        background: linear-gradient(to right, #38bdf8, #818cf8);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .hero p {
        font-size: 1.2rem;
        line-height: 1.8;
        color: var(--text-muted);
        margin-bottom: 35px;
    }

    .btn-hero {
        padding: 16px 40px;
        background: linear-gradient(135deg, #38bdf8, #2563eb);
        border: none;
        border-radius: 50px;
        color: white;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 10px 20px rgba(56, 189, 248, 0.3);
        text-decoration: none;
        display: inline-block;
    }

    .btn-hero:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 30px rgba(56, 189, 248, 0.4);
    }

    /* ===== PARTNERS ===== */
    .partners-strip {
        background: rgba(15, 23, 42, 0.4);
        padding: 30px 8%;
        display: flex;
        justify-content: space-around;
        align-items: center;
        filter: grayscale(1);
        opacity: 0.6;
        gap: 40px;
        flex-wrap: wrap;
    }
    .partner-logo { font-size: 1.5rem; font-weight: 700; color: white; display: flex; align-items: center; gap: 10px; }

    /* ===== STATS SECTION ===== */
    .stats-bar {
        background: rgba(15, 23, 42, 0.8);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        padding: 40px 8%;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        text-align: center;
        gap: 30px;
    }

    .stat-item h2 {
        font-size: 2.5rem;
        color: var(--primary);
        margin-bottom: 5px;
    }

    .stat-item p {
        font-size: 0.9rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    /* ===== WORKFLOW SECTION ===== */
    .section-padding { padding: 100px 8%; }
    .text-center { text-align: center; }
    .section-title { font-size: 2.5rem; font-weight: 700; margin-bottom: 60px; }

    .workflow-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 40px;
    }

    .step-card {
        background: rgba(255,255,255,0.02);
        border: 1px solid rgba(255,255,255,0.05);
        border-radius: 24px;
        padding: 40px;
        position: relative;
        transition: all 0.3s;
    }

    .step-card:hover {
        background: rgba(255,255,255,0.04);
        border-color: var(--primary);
        transform: translateY(-10px);
    }

    .step-icon {
        width: 60px;
        height: 60px;
        background: rgba(56, 189, 248, 0.1);
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: var(--primary);
        margin-bottom: 25px;
    }

    /* ===== FEATURES GRID ===== */
    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 30px;
    }
    .feature-item {
        padding: 30px;
        background: rgba(255,255,255,0.01);
        border: 1px solid rgba(255,255,255,0.03);
        border-radius: 20px;
        transition: 0.3s;
    }
    .feature-item i { font-size: 2rem; color: var(--primary); margin-bottom: 20px; display: block; }
    .feature-item h3 { margin-bottom: 15px; }
    .feature-item p { color: var(--text-muted); font-size: 0.9rem; line-height: 1.6; }

    /* ===== PRICING ===== */
    .pricing-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 30px;
        margin-top: 40px;
    }

    .pricing-card {
        background: rgba(255,255,255,0.02);
        border: 1px solid rgba(255,255,255,0.05);
        border-radius: 24px;
        padding: 40px;
        text-align: center;
        transition: all 0.3s;
    }

    .pricing-card.premium {
        background: rgba(56, 189, 248, 0.05);
        border-color: var(--primary);
        transform: scale(1.05);
        z-index: 10;
    }

    .price { font-size: 3rem; font-weight: 800; margin: 20px 0; }
    .price span { font-size: 1rem; color: var(--text-muted); }

    .feature-list { list-style: none; text-align: left; margin: 30px 0; color: var(--text-muted); }
    .feature-list li { margin-bottom: 12px; display: flex; align-items: center; gap: 10px; }
    .feature-list i { color: var(--primary); }

    /* ===== FAQ ===== */
    .faq-container { max-width: 800px; margin: 0 auto; }
    .faq-item {
        background: rgba(255,255,255,0.02);
        border-radius: 12px;
        margin-bottom: 15px;
        padding: 20px;
        cursor: pointer;
        transition: background 0.3s;
    }
    .faq-item:hover { background: rgba(255,255,255,0.04); }
    .faq-item h4 { display: flex; justify-content: space-between; align-items: center; }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Mobile Responsive Homepage */
    @media (max-width: 768px) {
        .hero {
            height: auto;
            min-height: 85vh;
            padding: 100px 5%; /* More top padding for navbar */
            text-align: center;
        }
        .hero h1 {
            font-size: 2.5rem;
        }
        .hero-content {
            margin: 0 auto;
        }
        .hero div {
            justify-content: center;
            flex-direction: column;
        }
        
        .workflow-grid {
            grid-template-columns: 1fr; /* Stack "How it works" steps */
            gap: 20px;
        }
        
        .stats-bar {
            grid-template-columns: repeat(2, 1fr); /* 2x2 grid for stats */
            gap: 20px;
            padding: 30px 5%;
        }
        
        .section-padding {
            padding: 60px 5%;
        }
        
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 40px;
        }

        .newsletter-form {
            flex-direction: column;
            gap: 15px;
        }
        .newsletter-form input {
            width: 100% !important;
        }
        .newsletter-form button {
            width: 100%;
        }
    }
</style>

<section class="hero">
    <div class="hero-content">
        <h1>Bienvenue Dans <span> Notre Guichet</span></h1>
        <p>
            TicketFlow est la solution de support client nouvelle génération. 
            Une interface intuitive, une collaboration en temps réel et une résolution optimisée pour vos équipes.
        </p>
        <div style="display: flex; gap: 20px;">
            {% if not app.user or is_granted('ROLE_AGENT') or is_granted('ROLE_ADMIN') %}
                <a href="{{ path('app_tick_ajou') }}" class="btn-hero">Ouvrir un ticket</a>
            {% endif %}
            <a href="#concept" style="color: white; text-decoration: none; display: flex; align-items: center; gap: 10px; font-weight: 500;">
                <i class="fas fa-play-circle" style="font-size: 2.5rem; color: var(--primary);"></i>
                Voir le concept
            </a>
        </div>
    </div>
</section>

<div class="partners-strip">
    <div class="partner-logo"><i class="fab fa-apple"></i> TechCorp</div>
    <div class="partner-logo"><i class="fab fa-microsoft"></i> MicroSoft</div>
    <div class="partner-logo"><i class="fab fa-google"></i> CloudLink</div>
    <div class="partner-logo"><i class="fab fa-amazon"></i> PrimeDev</div>
    <div class="partner-logo"><i class="fab fa-uber"></i> FastMove</div>
</div>

<div class="stats-bar">
    <div class="stat-item">
        <h2>99.9%</h2>
        <p>Disponibilité</p>
    </div>
    <div class="stat-item">
        <h2>2.5k+</h2>
        <p>Utilisateurs</p>
    </div>
    <div class="stat-item">
        <h2>15min</h2>
        <p>Temps de réponse</p>
    </div>
    <div class="stat-item">
        <h2>10k+</h2>
        <p>Tickets résolus</p>
    </div>
</div>

<!-- NEW EVENTS SECTION (GUICHET STYLE) -->
<section class="section-padding">
    <div class="d-flex justify-content-between align-items-center mb-5">
        <h2 class="h2 fw-bold text-white mb-0">Événements à la une</h2>
        <a href="{{ path('app_event_index') }}" class="text-primary text-decoration-none fw-600">
            Voir tout <i class="fas fa-arrow-right ms-2"></i>
        </a>
    </div>

    <div class="row g-4">
        {% for event in events|slice(0, 4) %}
            <div class="col-xl-3 col-lg-4 col-md-6 mb-4">
                <div class="event-item h-100 d-flex flex-column">
                    <div class="d-flex align-items-center mb-3 px-1">
                        <div class="creator-avatar rounded-circle bg-white d-flex align-items-center justify-content-center me-2 overflow-hidden" style="width: 24px; height: 24px;">
                            <img src="https://ui-avatars.com/api/?name={{ event.createur.nom }}&background=fff&color=000&size=24" alt="Creator">
                        </div>
                        <span class="small fw-bold text-white text-uppercase" style="font-size: 0.75rem; letter-spacing: 0.5px; opacity: 0.9;">
                            {{ event.createur.nom }}
                        </span>
                    </div>

                    <a href="{{ path('app_event_show', {'id': event.id}) }}" class="text-decoration-none flex-grow-1">
                        <div class="position-relative overflow-hidden rounded-4 shadow-sm mb-3" style="aspect-ratio: 1/1; background: #1a1a1a;">
                            {% if event.image %}
                                <img src="{{ asset('uploads/events/' ~ event.image) }}" class="w-100 h-100 event-media" alt="{{ event.titre }}" style="object-fit: cover; transition: transform 0.5s ease;">
                            {% else %}
                                <div class="w-100 h-100 d-flex align-items-center justify-content-center opacity-10">
                                    <i class="fas fa-image fa-3x"></i>
                                </div>
                            {% endif %}
                        </div>
                    </a>

                    <a href="{{ path('app_event_show', {'id': event.id}) }}" class="text-decoration-none">
                        <h6 class="fw-bold text-white mb-2 text-truncate-2" style="font-size: 0.95rem; line-height: 1.4;">
                            {{ event.titre }}
                        </h6>
                    </a>

                    <div class="mt-auto ps-1">
                        <div class="d-flex align-items-start gap-2 mb-2 text-muted" style="font-size: 0.8rem;">
                            <i class="fas fa-map-marker-alt mt-1" style="width: 14px; opacity: 0.6;"></i>
                            <span class="text-truncate">{{ event.lieu }}</span>
                        </div>
                        <div class="d-flex align-items-center gap-2 text-muted" style="font-size: 0.8rem;">
                            <i class="far fa-calendar-alt" style="width: 14px; opacity: 0.6;"></i>
                            <span>{{ event.dateDebut|date('d M Y') }}</span>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</section>

<style>
    .text-truncate-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .event-media:hover { transform: scale(1.08); }
    .event-item { transition: transform 0.3s ease; }
    .event-item:hover { transform: translateY(-5px); }
</style>

<section class="section-padding" id="features">
    <h2 class="section-title text-center">Des Fonctionnalités qui font la différence</h2>
    <div class="features-grid">
        <div class="feature-item">
            <i class="fas fa-bolt"></i>
            <h3>Chat Instantané</h3>
            <p>Communiquez en temps réel avec vos agents pour une résolution ultra-rapide.</p>
        </div>
        <div class="feature-item">
            <i class="fas fa-shield-halved"></i>
            <h3>Sécurité Avancée</h3>
            <p>Contrôle d'accès granulaire et protection des données de vos clients.</p>
        </div>
        <div class="feature-item">
            <i class="fas fa-chart-line"></i>
            <h3>Analytics Détillés</h3>
            <p>Générez des rapports précis sur la performance de votre support.</p>
        </div>
        <div class="feature-item">
            <i class="fas fa-mobile-screen"></i>
            <h3>Multi-plateforme</h3>
            <p>Accédez à vos tickets n'importe où, que ce soit sur mobile ou desktop.</p>
        </div>
    </div>
</section>

<section class="section-padding" id="concept">
    <h2 class="section-title text-center">Comment ça marche ?</h2>
    <div class="workflow-grid">
        <div class="step-card">
            <div class="step-icon">
                <i class="fas fa-plus"></i>
            </div>
            <h3>Créez votre Ticket</h3>
            <p>Décrivez votre problème en quelques secondes et joignez les informations nécessaires.</p>
        </div>
        <div class="step-card">
            <div class="step-icon">
                <i class="fas fa-comments"></i>
            </div>
            <h3>Chattez en Direct</h3>
            <p>Nos agents vous répondent instantanément via notre système de messagerie interne.</p>
        </div>
        <div class="step-card">
            <div class="step-icon">
                <i class="fas fa-check-double"></i>
            </div>
            <h3>Résolution Validée</h3>
            <p>Une fois le problème réglé, le ticket est clôturé et archivé dans votre historique.</p>
        </div>
    </div>
</section>

<section class="section-padding">
    <h2 class="section-title text-center">Nos Formules</h2>
    <div class="pricing-grid">
        <div class="pricing-card">
            <h3>Standard</h3>
            <div class="price">0€<span>/mois</span></div>
            <ul class="feature-list">
                <li><i class="fas fa-check"></i> Jusqu'à 5 tickets actifs</li>
                <li><i class="fas fa-check"></i> Support par chat</li>
                <li><i class="fas fa-check"></i> Temps de réponse 24h</li>
            </ul>
            <a href="{{ path('app_register') }}" class="btn-hero" style="padding: 12px 25px; border-radius: 10px;">Commencer</a>
        </div>
        <div class="pricing-card premium">
            <h4 style="color: var(--primary); text-transform: uppercase; font-size: 0.8rem; letter-spacing: 2px;">Plus Populaire</h4>
            <h3>Business</h3>
            <div class="price">29€<span>/mois</span></div>
            <ul class="feature-list">
                <li><i class="fas fa-check"></i> Tickets illimités</li>
                <li><i class="fas fa-check"></i> Priorité Haute garantie</li>
                <li><i class="fas fa-check"></i> Support dédié 24/7</li>
                <li><i class="fas fa-check"></i> Statistiques avancées</li>
            </ul>
            <a href="{{ path('app_register') }}" class="btn-hero" style="padding: 12px 25px; border-radius: 10px;">Choisir Business</a>
        </div>
        <div class="pricing-card">
            <h3>Enterprise</h3>
            <div class="price">99€<span>/mois</span></div>
            <ul class="feature-list">
                <li><i class="fas fa-check"></i> Multi-utilisateurs</li>
                <li><i class="fas fa-check"></i> API d'intégration</li>
                <li><i class="fas fa-check"></i> Hotline prioritaire</li>
                <li><i class="fas fa-check"></i> SLA personnalisée</li>
            </ul>
            <a href="{{ path('app_register') }}" class="btn-hero" style="padding: 12px 25px; border-radius: 10px;">Contactez-nous</a>
        </div>
    </div>
</section>

<section class="section-padding" style="background: rgba(255,255,255,0.01);">
    <h2 class="section-title text-center">Ils nous font confiance</h2>
    <div class="testimonial-grid">
        <div class="testimonial-card">
            <i class="fas fa-quote-left" style="color: var(--primary); font-size: 1.5rem; margin-bottom: 20px; display: block;"></i>
            <p>"Le système de chat intégré a radicalement changé notre façon de communiquer avec le support. C'est rapide et efficace."</p>
            <div class="user-info">
                <div class="user-img"></div>
                <div>
                    <div style="font-weight: 600;">Marc Dubois</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted);">Directeur IT, Techcorp</div>
                </div>
            </div>
        </div>
        <div class="testimonial-card">
            <i class="fas fa-quote-left" style="color: var(--primary); font-size: 1.5rem; margin-bottom: 20px; display: block;"></i>
            <p>"L'interface glassmorphism est magnifique. On sent que c'est un produit moderne et bien pensé."</p>
            <div class="user-info">
                <div class="user-img"></div>
                <div>
                    <div style="font-weight: 600;">Sophie Laurent</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted);">Manager Support, GlobalDev</div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section-padding">
    <h2 class="section-title text-center">Questions Fréquentes</h2>
    <div class="faq-container">
        <div class="faq-item">
            <h4>Quels sont les délais de traitement ? <i class="fas fa-chevron-down"></i></h4>
            <p style="margin-top: 10px; color: var(--text-muted); font-size: 0.9rem;">Selon votre plan, cela peut varier de 15 minutes à 24 heures.</p>
        </div>
        <div class="faq-item">
            <h4>Puis-je joindre des fichiers à mes tickets ? <i class="fas fa-chevron-down"></i></h4>
            <p style="margin-top: 10px; color: var(--text-muted); font-size: 0.9rem;">Oui, vous pouvez uploader des photos et documents pour illustrer vos problèmes.</p>
        </div>
        <div class="faq-item">
            <h4>Comment changer mon mot de passe ? <i class="fas fa-chevron-down"></i></h4>
            <p style="margin-top: 10px; color: var(--text-muted); font-size: 0.9rem;">Rendez-vous dans la section "Profil" en haut à droite pour mettre à jour vos identifiants.</p>
        </div>
    </div>
</section>

<section class="section-padding" style="background: linear-gradient(135deg, rgba(56, 189, 248, 0.1), transparent); border-radius: 40px; margin: 0 8% 100px 8%; text-align: center;">
    <h2>Prêt à optimiser votre support ?</h2>
    <p style="margin: 20px 0 40px 0; color: var(--text-muted);">Rejoignez plus de 2 500 entreprises qui font confiance à TicketFlow.</p>
    <div class="newsletter-form" style="display: flex; justify-content: center; gap: 15px; max-width: 500px; margin: 0 auto;">
        <input type="email" placeholder="Votre email..." style="padding: 15px 25px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.3); color: white; width: 300px; outline: none; transition: 0.3s;">
        <button class="btn-hero" style="white-space: nowrap;">S'abonner</button>
    </div>
</section>

<footer style="padding: 60px 8%; border-top: 1px solid rgba(255,255,255,0.05); text-align: center;">
    <h2>Ticket<span style="color: var(--primary);">Flow</span></h2>
    <p style="color: var(--text-muted); margin: 20px 0;">© 2026 TicketFlow System. Tous droits réservés.</p>
    <div style="display: flex; justify-content: center; gap: 20px; font-size: 1.2rem;">
        <i class="fab fa-twitter"></i>
        <i class="fab fa-linkedin"></i>
        <i class="fab fa-github"></i>
    </div>
</footer>
{% endblock %}
